<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Welcome to the Colonial' Craft official Website</title>
  <link rel="icon" href="icon.png" />
  <style>
    :root {
      --bg-color: #f5f1e0;
      --text-color: #3b2f1a;
      --card-bg: rgba(245, 241, 224, 0.85);
      --link-color: #8b5e3c;
      --navbar-bg: rgba(222, 210, 180, 0.95);
      --hover-color: #a06e3b;
      --shadow-color: rgba(0,0,0,0.3);
    }
    body.light-mode {
      --bg-color: #f5f1e0;
      --text-color: #3b2f1a;
      --card-bg: rgba(245, 241, 224, 0.85);
      --link-color: #8b5e3c;
      --navbar-bg: rgba(222, 210, 180, 0.95);
      --hover-color: #a06e3b;
    }

    html, body {
      margin: 0;
      padding: 0;
      font-family: 'Garamond', 'Times New Roman', serif;
      color: var(--text-color);
      scroll-behavior: smooth;
      background: url('banner (2).png') center center fixed;
      background-size: cover;
      background-attachment: fixed;
    }

    /* Navbar */
    nav {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      background: var(--navbar-bg);
      display: flex;
      justify-content: center;
      padding: 1rem 0;
      z-index: 1000;
      box-shadow: 0 2px 5px var(--shadow-color);
      font-weight: bold;
      letter-spacing: 1px;
    }
    nav a {
      margin: 0 1.2rem;
      text-decoration: none;
      color: var(--text-color);
      transition: color 0.3s;
      font-family: 'Garamond', serif;
      display: flex;
      align-items: center;
    }
    nav a:hover {
      color: var(--hover-color);
    }
    nav a img {
      width: 20px;
      height: 20px;
      margin-right: 0.3rem;
    }

    /* Overlay */
    .overlay {
      background-color: rgba(0, 0, 0, 0.6);
      min-height: 100vh;
      padding: 6rem 2rem 2rem 2rem;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* Cards */
    .card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 1.8rem;
      margin: 1rem;
      max-width: 600px;
      width: 90%;
      text-align: center;
      position: relative;
      border: 2px solid #b59b6d;
      box-shadow: 4px 4px 12px var(--shadow-color);
    }

    /* Settings menu - Colonial style */
    .settings-menu {
      position: absolute;
      top: 2.5rem;
      right: 1rem;
      background: linear-gradient(to bottom, #fdf5e6, #f0e3c2);
      padding: 1rem;
      border-radius: 8px;
      display: none;
      flex-direction: column;
      min-width: 220px;
      z-index: 100;
      border: 2px solid #b59b6d;
      box-shadow: 4px 4px 10px var(--shadow-color);
      font-family: 'Garamond', 'Times New Roman', serif;
      color: #5a3e1b;
    }
    .settings-menu label {
      cursor: pointer;
      margin-bottom: 0.7rem;
      display: flex;
      justify-content: space-between;
    }
    .settings-menu input[type="checkbox"] {
      transform: scale(1.2);
      margin-left: 0.5rem;
    }
    .settings-menu select {
      background: #fdf5e6;
      border: 1px solid #b59b6d;
      padding: 0.3rem;
      font-family: 'Garamond', serif;
      color: #5a3e1b;
    }

    /* Discord & Settings icons */
    .discord, .settings {
      font-size: 1.5rem;
      transition: color 0.3s;
      color: var(--text-color);
    }
    .discord:hover { color: #7289da; }
    .settings:hover { color: #a06e3b; }

    /* Headings */
    h1 {
      font-size: 3rem;
      text-align: center;
      text-shadow: 2px 2px #b59b6d;
    }
    .subtitle {
      font-size: 1.2rem;
      margin-bottom: 2rem;
      text-align: center;
    }

    /* Player list */
    .player-list {
      max-height: 100px;
      overflow: hidden;
      transition: max-height 0.3s ease-in-out;
    }
    .player-entry {
      display: flex;
      align-items: center;
      margin: 0.2rem 0;
      color: var(--text-color);
    }
    .player-entry img {
      width: 20px;
      height: 20px;
      margin-right: 0.5rem;
    }

    /* Misc */
    .view-more {
      margin-top: 0.5rem;
      color: #5a3e1b;
      cursor: pointer;
      font-size: 0.9rem;
      user-select: none;
    }
    .how-to-join {
      margin-top: 4rem;
      text-align: center;
      padding-bottom: 4rem;
    }
    .autorefresh {
      font-size: 0.9rem;
      margin-top: 0.5rem;
      color: var(--text-color);
    }
    .refresh {
      display: inline-block;
      margin-left: 0.5rem;
      cursor: pointer;
      transition: transform 0.6s ease;
    }
    .refresh.spin { transform: rotate(360deg); }
  </style>
</head>
<body>
  <!-- Navbar -->
  <nav>
    <a href="#join"><img src="icons/house.png" alt="Home Icon">Home</a>
    <a href="#serverStatus"><img src="icons/server.png" alt="Server Icon">Server Status</a>
    <a href="http://209.192.185.135:25572/" target="_blank"><img src="icons/map.png" alt="Dynmap Icon">Dynmap</a>
    <a class="settings" onclick="toggleSettings()">‚öôÔ∏è</a>
  </nav>

  <div class="overlay">
    <a class="discord" href="https://discord.gg/DJPG7rnckN" title="Join our Discord!" target="_blank">üí¨</a>

    <div class="settings-menu" id="settingsMenu">
      <label>
        <input type="checkbox" id="themeToggle" onchange="toggleTheme()" />
        Toggle Light/Dark Mode
      </label>
      <label for="languageSelect">Choose Language (Coming soon)</label>
      <select id="languageSelect">
        <option>English</option>
        <option>German</option>
        <option>French</option>
        <option>Spanish</option>
      </select>
    </div>

    <h1>Welcome to the Colonial' Craft official Website</h1>
    <div class="subtitle">Explore, survive, and build together. Check who‚Äôs online below.</div>

    <div class="card" id="serverStatus">
      <div>
        <span class="emoji">üåê</span><strong>Server Status</strong>
        <span class="refresh" id="refreshIcon" onclick="checkServerStatus()">&#x21bb;</span>
      </div>
      <p id="statusText">Checking server status...</p>
      <div id="playerList" class="player-list"></div>
      <div class="view-more" id="viewMore" onclick="togglePlayerList()" style="display: none;"></div>
      <div class="autorefresh" id="autorefresh">Automatically refreshing in 30 seconds</div>
    </div>

    <div class="card">
      <div><span class="emoji">üìñ</span><strong>About Colonial' Craft</strong></div>
      <p>
       üåç Welcome to Colonial' Craft!<br>
       Colonial Craft is a Minecraft Earth SMP where players settle across a massive Earth map, forming teams, factions, and nations to expand their influence. Build thriving cities, forge alliances, trade resources, and wage wars to shape the world in your vision. Whether you dream of leading a powerful empire or joining a small community of explorers, the story of Colonial Craft is written by its players.
      </p>
    </div>

    <div class="card how-to-join" id="join">
      <div><span class="emoji">üõ†Ô∏è</span><strong>How to Join Colonial' Craft</strong></div>
      <p>
        1. Launch Minecraft (Java Edition recommended).<br />
        2. Go to Multiplayer and click Add Server.<br />
        3. Enter Server IP: <strong>colonialcraft.sherman.gg</strong><br />
        4. Join and start exploring!<br /><br />
        üí°<a href="https://discord.gg/DJPG7rnckN" target="_blank" style="color: var(--link-color);">Join Discord here</a>
      </p>
    </div>
  </div>

  <script>
    const serverIP = "colonialcraft.sherman.gg";
    const statusText = document.getElementById("statusText");
    const playerListContainer = document.getElementById("playerList");
    const viewMoreBtn = document.getElementById("viewMore");
    const refreshIcon = document.getElementById("refreshIcon");
    const autorefreshText = document.getElementById("autorefresh");
    const themeToggle = document.getElementById("themeToggle");
    const settingsMenu = document.getElementById("settingsMenu");

    let fullPlayerList = [];
    let expanded = false;
    let countdown = 30;

    function toggleSettings() {
      settingsMenu.style.display = settingsMenu.style.display === "flex" ? "none" : "flex";
    }
    function toggleTheme() {
      document.body.classList.toggle("light-mode");
    }

    function renderPlayerList() {
      playerListContainer.innerHTML = "";
      const maxShown = 5;
      const toShow = expanded ? fullPlayerList : fullPlayerList.slice(0, maxShown);
      toShow.forEach(name => {
        const div = document.createElement("div");
        div.className = "player-entry";
        div.innerHTML = `<img src="https://mc-heads.net/avatar/${name}/20" alt="${name} avatar"/>${name}`;
        playerListContainer.appendChild(div);
      });
      if (fullPlayerList.length > maxShown) {
        viewMoreBtn.style.display = "block";
        viewMoreBtn.innerText = expanded ? `Hide extra players` : `View ${fullPlayerList.length - maxShown} more player${fullPlayerList.length - maxShown > 1 ? "s" : ""}`;
      } else viewMoreBtn.style.display = "none";
    }

    function togglePlayerList() { expanded = !expanded; renderPlayerList(); }

    async function checkServerStatus() {
      refreshIcon.classList.add("spin");
      statusText.innerText = "Checking server status...";
      viewMoreBtn.style.display = "none";
      playerListContainer.innerHTML = "";
      try {
        const res = await fetch(`https://api.mcsrvstat.us/2/${serverIP}`);
        const data = await res.json();
        if (!data.online) { statusText.innerHTML = "‚ùå Server is offline"; refreshIcon.classList.remove("spin"); return; }
        const online = data.players.online;
        const max = data.players.max;
        fullPlayerList = data.players.list || [];
        statusText.innerHTML = `‚úÖ Online ‚Äî ${online}/${max} players`;
        renderPlayerList();
      } catch (err) { statusText.innerText = "‚ö†Ô∏è Couldn't fetch server status."; }
      finally { refreshIcon.classList.remove("spin"); countdown = 30; }
    }

    setInterval(() => {
      countdown--;
      autorefreshText.textContent = `Automatically refreshing in ${countdown} seconds`;
      if (countdown <= 0) checkServerStatus();
    }, 1000);

    checkServerStatus();
  </script>
</body>
</html>
